<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  <ThinkTreeDef>
    <defName>DeathKnight_SummonedCreature</defName>
    <thinkRoot Class="ThinkNode_Priority">
      <subNodes>
        <!-- Basic survival nodes that always apply -->
        <li Class="ThinkNode_Subtree">
          <treeDef>Despawned</treeDef>
        </li>
        <li Class="ThinkNode_Subtree">
          <treeDef>Downed</treeDef>
        </li>
        <li Class="ThinkNode_ConditionalCanDoConstantThinkTreeJobNow">
          <subNodes>
            <li Class="JobGiver_FleePotentialExplosion" />
          </subNodes>
        </li>

        <!-- Handle queued jobs regardless of mode -->
        <li Class="ThinkNode_QueuedJob" />

        <!-- Split between ToArms and Normal behavior -->
        <li Class="Thor.ThinkNode_ConditionalIsCalledToArms">
          <!-- ToArms behavior -->
          <subNodes>
            <li Class="ThinkNode_ConditionalDrafted">
              <subNodes>
                <li Class="ThinkNode_Tagger">
                  <tagToGive>DraftedOrder</tagToGive>
                  <subNodes>
                    <li Class="JobGiver_MoveToStandable" />
                    <li Class="JobGiver_Orders" />
                  </subNodes>
                </li>
              </subNodes>
            </li>
            <li Class="Thor.ThinkNode_ConditionalSelfOrMasterHasTarget">
              <subNodes>
                <li Class="Thor.JobGiver_SummonedCreatureFightEnemy" />
              </subNodes>
            </li>
            <li Class="Thor.ThinkNode_ConditionalHasMaster">
              <subNodes>
                <li Class="Thor.ThinkNode_ConditionalShouldFollowFormation">
                  <subNodes>
                    <li Class="Thor.JobGiver_SummonedCreatureFormationFollow" />
                  </subNodes>
                </li>
                <li Class="Thor.ThinkNode_ConditionalShouldFollowFormation">
                  <invert>true</invert>
                  <subNodes>
                    <li Class="Thor.JobGiver_SummonedCreatureFollowMaster" />
                  </subNodes>
                </li>
              </subNodes>
            </li>
          </subNodes>
        </li>


        <!-- Normal colonist behavior when not in ToArms mode -->
        <li Class="Thor.ThinkNode_ConditionalIsCalledToArms">
          <invert>true</invert>
          <subNodes>


            <!-- if human use human like tree -->
            <li Class="Thor.ThinkNode_ConditionalIsHuman">
              <subNodes>
                <li Class="ThinkNode_Subtree">
                  <treeDef>Humanlike</treeDef>
                </li>
              </subNodes>
            </li>
            <!-- if not human use animal tree, probably wont handle mechs well -->
            <li Class="Thor.ThinkNode_ConditionalIsHuman">
              <invert>true</invert>
              <subNodes>
                <li Class="ThinkNode_Subtree">
                  <treeDef>Animal</treeDef>
                </li>
              </subNodes>
            </li>
          </subNodes>
        </li>

        <!-- Fallback behaviors -->
        <li Class="Thor.ThinkNode_ConditionalHasNoMaster">
          <subNodes>
            <li Class="JobGiver_WanderAnywhere" />
          </subNodes>
        </li>
      </subNodes>
    </thinkRoot>
  </ThinkTreeDef>
</Defs>
